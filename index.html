<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" href="data:,"> 
    <title>English Master v7.1 (Fixed)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="aurora-bg"><div class="orb orb-1"></div><div class="orb orb-2"></div></div>
    <canvas id="confetti-canvas"></canvas>
    <div id="toast">ƒ∞≈ülem Ba≈üarƒ±lƒ±</div>
    
    <!-- Level Up Modal -->
    <div id="level-up-modal" class="modal-overlay hidden">
        <div class="modal-content level-up-content">
            <div class="level-up-emoji">üéâ</div>
            <h2 class="level-up-title">SEVƒ∞YE ATLADIN!</h2>
            <div class="level-up-subtitle">Yeni Seviyen</div>
            <div id="new-level-display" class="new-level-display">2</div>
            <button class="btn w-full level-up-btn" onclick="document.getElementById('level-up-modal').classList.add('hidden')">Harika!</button>
        </div>
    </div>

    <!-- Completion Modal -->
    <div id="completion-modal" class="modal-overlay hidden">
        <div class="modal-content level-up-content">
            <div class="level-up-emoji">üéì</div>
            <h2 class="level-up-title">TEBRƒ∞KLER!</h2>
            <div class="level-up-subtitle">T√ºm kelime havuzunu tamamladƒ±n!</div>
            <div style="color:var(--text-muted); margin-bottom:20px;">
                T√ºm kelimeleri √∂ƒürendin. ƒ∞stersen √∂ƒürenilen kelimeleri sƒ±fƒ±rlayƒ±p (XP ve Seviyen korunarak) tekrar ba≈ülayabilirsin.
            </div>
            <button class="btn w-full level-up-btn" onclick="window.resetLearnedWords()" style="background:var(--neon-green); margin-bottom:10px;">üîÑ Kelimeleri Sƒ±fƒ±rla ve Ba≈üla</button>
            <button class="btn w-full level-up-btn" onclick="document.getElementById('completion-modal').classList.add('hidden')" style="background:rgba(255,255,255,0.1);">Kapat</button>
        </div>
    </div>

    <!-- Favorites Modal -->
    <div id="favs-modal" class="modal-overlay hidden">
        <div class="modal-content modal-content-full">
            <div class="modal-header">
                <h2 class="modal-title-text">Favorilerim</h2>
                <button class="btn modal-close-btn" onclick="document.getElementById('favs-modal').classList.add('hidden')">‚úï</button>
            </div>
            <div id="favorites-list-modal" class="modal-body-scroll"></div>
        </div>
    </div>

    <!-- Dictionary Modal -->
    <div id="dict-modal" class="modal-overlay hidden">
        <div class="modal-content modal-content-full">
            <div class="dict-header">
                <div class="dict-header-top">
                    <h2 class="modal-title-text">S√∂zl√ºk</h2>
                    <button class="btn modal-close-btn" onclick="document.getElementById('dict-modal').classList.add('hidden')">‚úï</button>
                </div>
                <input type="text" id="dict-search" placeholder="Kelime ara..." class="dict-search-input" onkeyup="window.filterDictionary()">
            </div>
            <div id="dict-list" class="modal-body-scroll"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title-text">Ayarlar</h2>
                <button class="btn modal-close-btn" onclick="document.getElementById('settings-modal').classList.add('hidden')">‚úï</button>
            </div>
            <div class="settings-body" style="padding: 20px;">
                <div class="setting-item" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div>
                        <div style="font-weight: bold;">Ses Efektleri</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Uygulama i√ßi sesler</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="sound-toggle" checked onchange="window.toggleSound(this.checked)">
                        <span class="slider round"></span>
                    </label>
                </div>
                <div class="setting-item" style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: bold;">Ses Seviyesi</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">Genel ses d√ºzeyi</div>
                    </div>
                    <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="1" oninput="window.setVolume(this.value)" style="width: 100px;">
                </div>
            </div>
        </div>
    </div>


    <header>
        <div class="hud-top">
            <div class="hud-group">
                <div class="hud-badge level-badge hud-badge-level">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
                    <span id="level-display">1</span>
                </div>
                <div class="hud-badge streak-badge">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
                    <span id="streak-display">0</span>
                </div>
                <div class="hud-badge currency-badge">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 3h12l4 6-10 13L2 9l4-6z"></path></svg>
                    <span id="coin-display">0</span>
                </div>
            </div>
            <div class="header-right">
                <div id="sync-status" class="sync-status" title="Bulut Senkronizasyonu" onclick="window.retrySync()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path><path d="M12 12v9"></path><path d="m16 16-4-4-4 4"></path></svg>
                </div>
                <div class="sync-status" title="Ayarlar" onclick="window.openSettings()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"></path></svg>
                </div>
            </div>
        </div>
        <div class="xp-track"><div id="xp-bar" class="xp-fill"></div></div>
    </header>
    <main>
        <div id="tab-learn" class="fade-in">
            <div class="page-header">
                <div><div class="page-title">Daily Session</div><h1 class="page-header-title">Learn</h1></div>
                <div class="progress-text" id="learn-progress-text">0 / 1000</div>
            </div>
            


            <div class="flashcard-container" onclick="window.flipCard()">
                <div class="flashcard" id="flashcard">
                    <div class="card-face card-front">
                        <div class="word-lg" id="fc-en">...</div>
                        <div class="word-context" id="fc-ctx">...</div>
                        <div class="card-actions" onclick="event.stopPropagation()">
                            <button class="btn action-btn" onclick="window.toggleFav()"><svg id="fav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path></svg></button>
                        </div>
                        <div class="flashcard-reveal-text">Tap to reveal</div>
                    </div>
                    <div class="card-face card-back">
                        <div class="word-meaning" id="fc-tr">...</div>
                    </div>
                </div>
            </div>
            <div class="vote-container">
                <button class="btn vote-btn vote-fail" onclick="window.vote(false)">Tekrar</button>
                <button class="btn vote-btn vote-success" onclick="window.vote(true)">Biliyorum</button>
            </div>
        </div>
        
        <div id="tab-quests" class="hidden fade-in">
            <div class="page-header"><h1 class="page-header-title">Quests</h1><div class="page-title">Reset 00:00</div></div>
            <div id="quests-container"></div>
        </div>

        <div id="tab-quiz" class="hidden fade-in">
            <div id="duel-container" class="hidden">
                <div class="duel-header">
                    <div class="duel-player-info">
                        <div class="duel-name duel-name-user">SEN</div>
                        <div class="duel-bar-track"><div id="duel-my-bar" class="duel-bar-fill duel-bar-user"></div></div>
                    </div>
                    <div class="duel-vs-badge">VS</div>
                    <div class="duel-player-info">
                        <div id="duel-opponent-name" class="duel-name duel-name-opponent">RAKƒ∞P</div>
                        <div class="duel-bar-track"><div id="duel-opponent-bar" class="duel-bar-fill duel-bar-opponent"></div></div>
                    </div>
                </div>
                <div id="duel-question-area" class="duel-question-area">
                    <!-- Quiz content will be injected here -->
                </div>
            </div>

            
            <div id="games-menu" class="games-grid">
                <button class="glass-panel btn game-btn-content" onclick="window.startQuiz()">
                    <div class="game-btn-icon">üìù</div>
                    <div class="game-btn-title">Quiz</div>
                    <div class="game-btn-sub">20 Soru</div>
                </button>
                <button class="glass-panel btn game-btn-content btn-challenge" onclick="window.startChallenge()">
                    <div class="game-btn-icon">‚ö°</div>
                </button>
                <button class="glass-panel btn game-btn-content" onclick="window.startMatch()">
                    <div class="game-btn-icon">üß©</div>
                    <div class="game-btn-title">E≈üle≈ütirme</div>
                    <div class="game-btn-sub">Kartlarƒ± Bul</div>
                </button>
                <button class="glass-panel btn game-btn-content" onclick="window.startHangman()">
                    <div class="game-btn-icon">üïµÔ∏è</div>
                    <div class="game-btn-title">Kelime Avƒ±</div>
                    <div class="game-btn-sub">Harfleri Tahmin Et</div>
                </button>
            </div>

            <!-- Quiz & Challenge Area -->
            <div id="quiz-play-area" class="glass-panel hidden quiz-play-area">
                <div class="quiz-header-info">
                    <span id="quiz-counter">1 / 20</span>
                    <span id="quiz-challenge-area" class="hidden quiz-timer-text">‚è±Ô∏è <span id="challenge-timer">60</span>s</span>
                </div>
                <div id="q-word" class="quiz-word">...</div>
                <div id="q-options" class="quiz-options-grid"></div>
            </div>

            <!-- Match Game Area -->
            <div id="match-area" class="hidden">
                <div class="match-header">
                    <button class="btn btn-back" onclick="window.showGamesMenu()">üîô √áƒ±k</button>
                    <div class="match-score-text">Skor: <span id="match-score">0</span></div>
                </div>
                <div id="match-grid" class="match-grid"></div>
            </div>

            <!-- Hangman Area -->
            <div id="hangman-area" class="glass-panel hidden hangman-area">
                <div class="match-header">
                    <button class="btn btn-back" onclick="window.showGamesMenu()">üîô √áƒ±k</button>
                    <div class="hangman-lives-text">‚ù§Ô∏è <span id="hangman-lives">6</span></div>
                </div>
                <div id="hangman-word" class="hangman-word-display">_ _ _ _ _</div>
                <div id="hangman-hint" class="hangman-hint"></div>
                <div id="hangman-keyboard" class="hangman-keyboard"></div>
            </div>

            <div id="quiz-result-area" class="result-screen hidden">
                <div class="result-content">
                    <div class="result-header">
                        <div class="result-icon-container">
                            <div class="result-icon">üèÜ</div>
                            <div class="result-glow"></div>
                        </div>
                        <h2 id="res-title">Harika ƒ∞≈ü!</h2>
                    </div>

                    <div class="result-score-card glass-panel">
                        <div class="score-label">TOPLAM SKOR</div>
                        <div id="res-score" class="score-value">0</div>
                    </div>

                    <div id="result-custom-content"></div>

                    <div class="result-rewards">
                        <div class="reward-item glass-panel">
                            <div class="reward-icon" style="color:var(--neon-purple);">‚ö°</div>
                            <div class="reward-info">
                                <span class="reward-label">XP Kazanƒ±ldƒ±</span>
                                <span id="res-xp" class="reward-amount">+0</span>
                            </div>
                        </div>
                    </div>

                    <div class="result-actions">
                        <button class="btn btn-primary w-full" onclick="window.showGamesMenu()">
                            <span>Devam Et</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5l7 7-7 7"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-shop" class="hidden fade-in">
            <div class="page-header"><h1 class="page-header-title">Market</h1><div class="page-title">Harcama Yap</div></div>
            
            <h3 class="shop-section-header">G√º√ßlendirmeler</h3>
            <div id="active-buffs-container" class="active-buffs-area"></div>
            <div class="glass-panel shop-item">
                <div class="shop-item-content"><div class="item-icon shop-icon-blue">‚ùÑÔ∏è</div><div><div class="shop-item-title">Streak Freeze</div><div class="shop-item-desc">Seri Koruma</div></div></div>
                <button id="btn-freeze" class="btn price-btn">200</button>
            </div>
            <div class="glass-panel shop-item">
                <div class="shop-item-content"><div class="item-icon shop-icon-purple">‚ö°</div><div><div class="shop-item-title">Double XP</div><div class="shop-item-desc">20x Soru Bonusu</div></div></div>
                <button id="btn-double" class="btn price-btn">350</button>
            </div>

            <h3 class="shop-section-header shop-section-header-margin">√áer√ßeveler</h3>
            <div id="shop-frames"></div>

            <h3 class="shop-section-header shop-section-header-margin">Temalar</h3>
            <div id="shop-themes"></div>
        </div>
        <div id="tab-profile" class="hidden fade-in">
            <div class="profile-header-center">
                <div class="progress-ring-container">
                    <svg class="progress-ring-svg" viewBox="0 0 120 120">
                        <circle class="progress-ring-circle-bg" r="54" cx="60" cy="60"></circle>
                        <circle class="progress-ring-circle" id="mastery-ring" r="54" cx="60" cy="60"></circle>
                    </svg>
                    <div class="progress-ring-text">
                        <div id="mastery-pct" class="mastery-pct-text">0%</div>
                        <div class="mastery-label">MASTERY</div>
                    </div>
                </div>
                <h2 class="profile-title">Profilim</h2>
                <div id="career-badge" class="career-badge">Lvl 1 ‚Ä¢ Stajyer</div>
                <div id="user-email" class="user-email-text"></div>
            </div>
            <div id="auth-container">
                <button id="google-login-btn" class="google-btn" onclick="window.loginGoogle()">
                    <svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z"/><path fill="#EA4335" d="M12 4.36c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.09 14.97 0 12 0 7.7 0 3.99 2.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                    Google ile Giri≈ü Yap
                </button>
                <button id="logout-btn" class="google-btn logout-btn hidden" onclick="window.logoutGoogle()">
                    √áƒ±kƒ±≈ü Yap
                </button>
            </div>
            <div class="profile-stats-grid">
                <div class="glass-panel stat-panel">
                    <div id="stat-xp" class="stat-value-blue">0</div>
                    <div class="stat-label">Toplam XP</div>
                </div>
                <div class="glass-panel stat-panel">
                    <div id="stat-words" class="stat-value-green">0</div>
                    <div class="stat-label">√ñƒürenilen (Total)</div>
                </div>
            </div>
            <h3 class="chart-header">Haftalƒ±k Aktivite</h3>
            <div class="glass-panel chart-panel">
                <div id="weekly-chart" class="chart-container"></div>
            </div>
            <div class="profile-stats-grid">
                <button class="glass-panel btn profile-action-btn" onclick="window.openFavs()">
                    <div style="font-size:2rem;">‚ù§Ô∏è</div>
                    <div style="font-weight:700;">Favoriler</div>
                </button>
                <button class="glass-panel btn profile-action-btn" onclick="window.openDictionary()">
                    <div style="font-size:2rem;">üìö</div>
                    <div style="font-weight:700;">S√∂zl√ºk</div>
                </button>
            </div>
            
            <h3 class="achievements-header">Ba≈üarƒ±mlar</h3>
            <div id="achievements-list" class="achievements-grid"></div>

            <button class="btn w-full btn-reset-data" onclick="window.resetData()">Verileri Sƒ±fƒ±rla</button>
        </div>
        <div id="tab-leaderboard" class="hidden fade-in">
            <div class="page-header"><h1 class="page-header-title">Liderler</h1><div class="page-title">Top 10</div></div>
            <div class="glass-panel" style="padding:0; overflow:hidden;">
                <div id="leaderboard-list">
                    <div class="leaderboard-loading">Y√ºkleniyor...</div>
                </div>
            </div>
            <div class="leaderboard-footer">
                Sƒ±ralama XP puanƒ±na g√∂re belirlenir.
            </div>
        </div>
    </main>
    <div class="nav-dock-container">
        <nav class="nav-dock">
            <button class="nav-item active" onclick="window.switchTab('learn', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path></svg>
                <span class="nav-label">√ñƒüren</span>
            </button>
            <button class="nav-item" onclick="window.switchTab('quests', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>
                <span class="nav-label">G√∂revler</span>
            </button>
            <button class="nav-item" onclick="window.switchTab('quiz', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" style="display:none;"></path><rect x="2" y="6" width="20" height="12" rx="2"></rect><path d="M6 12h4"></path><path d="M8 10v4"></path><circle cx="17" cy="12" r="1.5"></circle></svg>
                <span class="nav-label">Oyunlar</span>
            </button>
            <button class="nav-item" onclick="window.switchTab('leaderboard', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
                <span class="nav-label">Liderler</span>
            </button>
            <button class="nav-item" onclick="window.switchTab('shop', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><path d="M3 6h18"></path><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                <span class="nav-label">Market</span>
            </button>
            <button class="nav-item" onclick="window.switchTab('profile', this)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span class="nav-label">Profil</span>
            </button>
        </nav>
    </div>
    <!-- Sequential Script Loading (No Modules) -->
    <script src="js/store.js"></script>
    <script src="js/utils.js"></script>
    <!-- Firebase Compat (Works on file://) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>

    <script>
        const userConfig = {
            apiKey: "AIzaSyDUN827ZeD2YhEYAkB5OeWkF6OIiF59bFI",
            authDomain: "learning-eng-cc8e5.firebaseapp.com",
            projectId: "learning-eng-cc8e5",
            storageBucket: "learning-eng-cc8e5.firebasestorage.app",
            messagingSenderId: "443233964962",
            appId: "1:443233964962:web:d7181e4bb4e2377c5898fb",
            measurementId: "G-K60HHNSBQ2"
        };

        const firebaseConfig = (typeof window.__firebase_config !== 'undefined') ? JSON.parse(window.__firebase_config) : userConfig;

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        // Expose simplified API for app modules
        window.Firebase = {
            auth: firebase.auth(),
            db: firebase.firestore(),
            firestore: firebase.firestore, // Expose namespace for FieldValue
            analytics: firebase.analytics(),
            googleProvider: new firebase.auth.GoogleAuthProvider(),
            // Map compat methods to match modular names used in profile.js
            signInWithPopup: (auth, provider) => auth.signInWithPopup(provider),
            signOut: (auth) => auth.signOut(),
            onAuthStateChanged: (auth, cb) => auth.onAuthStateChanged(cb),
            signInAnonymously: (auth) => auth.signInAnonymously(),
            doc: (db, ...path) => null 
        };
    </script>
    <script src="js/modules/learn.js"></script>
    <script src="js/modules/quests.js"></script>
    <script src="js/modules/shop.js"></script>
    <script src="js/modules/leaderboard.js"></script>
    <script src="js/modules/achievements.js"></script>
    <script src="js/modules/quiz.js"></script>
    <script src="js/modules/multiplayer.js"></script>
    <script src="js/modules/profile.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
